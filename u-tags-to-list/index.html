<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-Extract Underlined Content</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        textarea { width: 100%; height: 200px; margin-bottom: 15px; padding: 10px; box-sizing: border-box; }
        #output { 
            border: 1px solid #ccc; 
            padding: 10px; 
            min-height: 50px; 
            background-color: #f9f9f9; 
            white-space: pre-wrap; /* Ensures long output wraps */
        }
    </style>
</head>
<body>

    <h2>HTML Content Extractor (<u> tags)</h2>
    <p>Start typing or pasting HTML below. The list will update automatically.</p>

    <textarea id="htmlInput" placeholder="Paste your HTML content here..."></textarea>
    
    <h3>Extracted Text Content (Comma Separated):</h3>
    <div id="output">
        </div>

    <script>
        function extractContent() {
            // 1. Get the HTML content from the textarea
            const htmlContent = document.getElementById('htmlInput').value;
            const outputDiv = document.getElementById('output');
            
            // Clear previous results
            outputDiv.textContent = ''; 
            
            // Handle empty input
            if (!htmlContent.trim()) {
                outputDiv.textContent = 'Awaiting HTML content...';
                return;
            }

            // 2. Create a temporary container element
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = htmlContent;

            // 3. Find all <u> elements
            const uTags = tempDiv.querySelectorAll('u');
            
            let extractedTexts = [];

            // 4. Iterate and collect textContent
            uTags.forEach(uTag => {
                const text = uTag.textContent.trim();
                // Push only non-empty, meaningful text
                if (text) {
                    extractedTexts.push(text);
                }
            });

            // 5. Output as a comma-separated string
            if (extractedTexts.length === 0) {
                outputDiv.textContent = 'No <u> tags found.';
            } else {
                // Join the array elements into a single comma-separated string
                outputDiv.textContent = extractedTexts.join(', ');
            }
        }
        
        // --- Auto-Generate Feature ---
        
        // 1. Get the textarea element
        const textarea = document.getElementById('htmlInput');

        // 2. Add an 'input' event listener to the textarea
        // The 'input' event fires whenever the value of an <input>, <select>, or <textarea> element has been changed.
        textarea.addEventListener('input', extractContent);

        // Run once on load to set the initial state
        extractContent(); 
    </script>

</body>
</html>
