<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-Extract & Copy Underlined Content</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        textarea { width: 100%; height: 200px; margin-bottom: 15px; padding: 10px; box-sizing: border-box; }
        #output { 
            border: 1px solid #ccc; 
            padding: 10px; 
            min-height: 50px; 
            background-color: #f9f9f9; 
            white-space: pre-wrap;
            margin-bottom: 15px;
        }
        button { 
            padding: 10px 15px; 
            background-color: #007bff; /* Blue for the copy button */
            color: white; 
            border: none; 
            cursor: pointer;
            margin-top: 10px;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

    <h2>HTML Content Extractor (<u> tags)</h2>
    <p>Start typing or pasting HTML below. The comma-separated list will update automatically.</p>

    <textarea id="htmlInput" placeholder="Paste your HTML content here..."></textarea>
    
    <h3>Extracted Text Content (Comma Separated):</h3>
    <div id="output">
        </div>
    
    <button onclick="copyToClipboard()">ðŸ“‹ Copy List</button>

    <script>
        /**
         * Extracts text content from all <u> tags in the input and displays 
         * them as a comma-separated string in the output div.
         */
        function extractContent() {
            const htmlContent = document.getElementById('htmlInput').value;
            const outputDiv = document.getElementById('output');
            
            outputDiv.textContent = ''; 
            
            if (!htmlContent.trim()) {
                outputDiv.textContent = 'Awaiting HTML content...';
                return;
            }

            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = htmlContent;

            const uTags = tempDiv.querySelectorAll('u');
            
            let extractedTexts = [];

            uTags.forEach(uTag => {
                const text = uTag.textContent.trim();
                if (text) {
                    extractedTexts.push(text);
                }
            });

            if (extractedTexts.length === 0) {
                outputDiv.textContent = 'No <u> tags found.';
            } else {
                // Join the array elements into a single comma-separated string
                outputDiv.textContent = extractedTexts.join(', ');
            }
        }
        
        /**
         * Copies the content of the output div to the clipboard.
         */
        function copyToClipboard() {
            const outputDiv = document.getElementById('output');
            const contentToCopy = outputDiv.textContent;
            const copyButton = document.querySelector('button');

            if (contentToCopy === 'Awaiting HTML content...' || contentToCopy === 'No <u> tags found.' || contentToCopy.length === 0) {
                alert('Nothing to copy.');
                return;
            }
            
            // Use the modern Clipboard API
            navigator.clipboard.writeText(contentToCopy)
                .then(() => {
                    // Provide visual feedback
                    copyButton.textContent = 'âœ… Copied!';
                    setTimeout(() => {
                        copyButton.textContent = 'ðŸ“‹ Copy List';
                    }, 1500);
                })
                .catch(err => {
                    console.error('Could not copy text: ', err);
                    alert('Failed to copy text. Please check console for details.');
                });
        }
        
        // --- Initialization ---
        
        const textarea = document.getElementById('htmlInput');
        
        // Auto-extract content on every change
        textarea.addEventListener('input', extractContent);

        // Set the initial state
        extractContent(); 
    </script>

</body>
</html>
